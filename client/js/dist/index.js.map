{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap d432b3e043546e643d53","webpack:///./client/js/src/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","io","$","Vue","update","ctx","clearRect","width","height","drawMap","entities","Player","id","player","updatePosition","coors","getRelativeCoors","x","y","fillStyle","fillText","strokeRect","color","fillRect","hp","maxHp","Bullet","bullet","Enemy","enemy","left","top","drawImage","background","clientId","entity","hspeed","vspeed","rightKey","upKey","leftKey","downKey","app","el","data","messages","type","msg","items","canvas","document","getElementById","getContext","textAlign","textboxFocused","players","bullets","Image","src","commands","help","push","debug","variable","socket","emit","eval","on","console","log","setInterval","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","removed","Symbol","iterator","next","done","err","return","objects","keys","length","objectType","instanceIds","j","instanceId","changes","k","changedProp","changedVal","$set","inventory","concat","ready","e","rect","getBoundingClientRect","clientX","clientY","preventDefault","focus","message","charAt","inputs","substr","split","apply","slice","blur","key","keyCode","indexOf","jQuery"],"mappings":"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","file":"index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n(function (io, $, Vue) {\n    'use strict';\n\n    var width = 800;\n    var height = 600;\n\n    var rightKey = 68;\n    var upKey = 87;\n    var leftKey = 65;\n    var downKey = 83;\n\n    var app = new Vue({\n        el: '#game',\n        data: {\n            messages: [{\n                type: 'info',\n                msg: 'Welcome to the game!'\n            }],\n            items: []\n        }\n    });\n\n    var canvas = document.getElementById('viewport');\n    var ctx = canvas.getContext('2d');\n    ctx.textAlign = 'center';\n\n    var textboxFocused = false;\n\n    var entities = {\n        players: [],\n        bullets: []\n    };\n    var clientId = '';\n\n    var background = new Image();\n    background.src = '../img/grass.png';\n\n    var commands = {\n        help: function help() {\n            app.messages.push({\n                type: 'info',\n                msg: 'Commands:\\n/help - List all commands'\n            });\n        },\n        debug: function debug(variable) {\n            socket.emit('clientDebug', variable + ': ' + eval(variable));\n        }\n    };\n\n    var socket = io();\n\n    socket.on('init', function (data) {\n        entities = data.entities;\n        console.log(entities);\n        clientId = data.clientId;\n        setInterval(update, 20);\n    });\n\n    socket.on('update', function (data) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = data.removed[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var removed = _step.value;\n\n                delete entities[removed.type][removed.id];\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        var objects = Object.keys(data.entities);\n        for (var i = 0; i < objects.length; i++) {\n            var objectType = objects[i];\n            var instanceIds = Object.keys(data.entities[objectType]);\n            for (var j = 0; j < instanceIds.length; j++) {\n                var instanceId = instanceIds[j];\n                var changes = Object.keys(data.entities[objectType][instanceId]);\n                for (var k = 0; k < changes.length; k++) {\n                    var changedProp = changes[k];\n                    var changedVal = data.entities[objectType][instanceId][changedProp];\n                    if (!entities[objectType][instanceId]) {\n                        entities[objectType][instanceId] = data.entities[objectType][instanceId];\n                    } else {\n                        entities[objectType][instanceId][changedProp] = changedVal;\n                    }\n                }\n            }\n        }\n        app.$set(app, 'items', data.inventory.items);\n    });\n\n    socket.on('chatMsg', function (data) {\n        app.messages = app.messages.concat([data]);\n    });\n\n    $(document).ready(function () {\n\n        $('#viewport').on(\"click\", function (e) {\n            var rect = canvas.getBoundingClientRect();\n            socket.emit('click', {\n                x: e.clientX - rect.left - width / 2 + entities.Player[clientId].x,\n                y: e.clientY - rect.top - height / 2 + entities.Player[clientId].y\n            });\n        });\n\n        $('#game-cont').on('contextmenu', function (e) {\n            e.preventDefault();\n        });\n\n        $('#chat-input, .login-input').on(\"focus\", function () {\n            textboxFocused = true;\n        }).on(\"blur\", function () {\n            textboxFocused = false;\n        });\n\n        $('#chat-cont').on('click', function (e) {\n            $('#chat-input').focus();\n        });\n\n        $('#chat-form').on('submit', function (e) {\n            var message = $('#chat-input').value();\n            if (message.charAt(0) === '/') {\n                var inputs = message.substr(1).split(' ');\n                if (commands[inputs[0]]) {\n                    commands[inputs[0]].apply(null, inputs.slice(1));\n                } else {\n                    socket.emit('chatMsg', message.substr(0, 140));\n                }\n            } else {\n                socket.emit('chatMsg', message.substr(0, 140));\n            }\n            $('#chat-input').blur();\n            $('#chat-input').value('');\n            textboxFocused = false;\n            e.preventDefault();\n        });\n    }).on('keydown', function (e) {\n        if (!textboxFocused) {\n            socket.emit('keyDown', {\n                key: e.keyCode\n            });\n            if ([rightKey, upKey, leftKey, downKey].indexOf(e.keyCode) !== -1) {\n                e.preventDefault();\n            }\n            if (e.keyCode === 84) {\n                $('#chat-input').focus();\n                e.preventDefault();\n            }\n            if (e.keyCode === 191) {\n                $('#chat-input').focus();\n            }\n        }\n    }).on('keyup', function (e) {\n        socket.emit('keyUp', {\n            key: e.keyCode\n        });\n    });\n\n    function update() {\n        ctx.clearRect(0, 0, width, height);\n        drawMap();\n        if (entities.Player) {\n            for (var id in entities.Player) {\n                var player = entities.Player[id];\n                updatePosition(player);\n                var coors = getRelativeCoors([player.x, player.y]);\n                var x = coors[0];\n                var y = coors[1];\n                ctx.fillStyle = 'black';\n                ctx.fillText(player.name, x, y - 20);\n                ctx.strokeRect(x - 8, y - 8, 16, 16);\n                ctx.fillStyle = player.color;\n                ctx.fillRect(x - 8, y - 8, 16, 16);\n                //if (id === clientId){\n                ctx.fillStyle = 'black';\n                ctx.fillRect(x - 12, y - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(x - 12, y - 16, 24 * player.hp / player.maxHp, 4);\n                //}\n            }\n        }\n        if (entities.Bullet) {\n            for (var _id in entities.Bullet) {\n                var bullet = entities.Bullet[_id];\n                updatePosition(bullet);\n                var _coors = getRelativeCoors([bullet.x, bullet.y]);\n                var _x = _coors[0];\n                var _y = _coors[1];\n                ctx.strokeRect(_x - 8, _y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(_x - 8, _y - 8, 16, 16);\n            }\n        }\n        if (entities.Enemy) {\n            for (var _id2 in entities.Enemy) {\n                var enemy = entities.Enemy[_id2];\n                updatePosition(enemy);\n                var _coors2 = getRelativeCoors([enemy.x, enemy.y]);\n                var _x2 = _coors2[0];\n                var _y2 = _coors2[1];\n                ctx.strokeRect(_x2 - 8, _y2 - 8, 16, 16);\n                ctx.fillStyle = '#922';\n                ctx.fillRect(_x2 - 8, _y2 - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(_x2 - 12, _y2 - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(_x2 - 12, _y2 - 16, 24 * enemy.hp / enemy.maxHp, 4);\n                ctx.fillStyle = 'black';\n                ctx.fillText(enemy.name, _x2, _y2 - 20);\n            }\n        }\n    }\n\n    function drawMap() {\n        var coors = getRelativeCoors([0, 0]);\n        var left = coors[0];\n        var top = coors[1];\n        for (var x = 0; x < width; x += 480) {\n            for (var y = 0; y < height; y += 480) {\n                ctx.drawImage(background, left + x, top + y, 480, 480);\n            }\n        }\n    }\n\n    function getRelativeCoors(coors) {\n        return [coors[0] - entities.Player[clientId].x + width / 2, coors[1] - entities.Player[clientId].y + height / 2];\n    }\n\n    function updatePosition(entity) {\n        entity.x += entity.hspeed / 2;\n        entity.y += entity.vspeed / 2;\n    }\n})(io, jQuery, Vue);\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d432b3e043546e643d53","(function(io, $, Vue){\n    'use strict';\n    \n    var width = 800;\n    var height = 600;\n    \n    var rightKey = 68;\n    var upKey = 87;\n    var leftKey = 65;\n    var downKey = 83;\n    \n    var app = new Vue({\n        el: '#game',\n        data: {\n            messages: [{\n                type: 'info',\n                msg: 'Welcome to the game!'\n            }],\n            items: []\n        }\n    });\n    \n    var canvas = document.getElementById('viewport');\n    var ctx = canvas.getContext('2d');\n    ctx.textAlign = 'center';\n    \n    var textboxFocused = false;\n    \n    var entities = {\n        players: [],\n        bullets: []\n    };\n    var clientId = '';\n    \n    var background = new Image();\n    background.src = '../img/grass.png';\n    \n    const commands = {\n        help: function(){\n            app.messages.push({\n                type: 'info',\n                msg: 'Commands:\\n/help - List all commands'\n            });\n        },\n        debug: function(variable){\n            socket.emit('clientDebug', variable + ': ' + eval(variable));\n        }\n    };\n    \n    var socket = io();\n    \n    socket.on('init', function(data){\n        entities = data.entities;\n        console.log(entities);\n        clientId = data.clientId;\n        setInterval(update, 20);\n    });\n    \n    socket.on('update', function(data){\n        for (var removed of data.removed){\n            delete entities[removed.type][removed.id];\n        }\n        var objects = Object.keys(data.entities);\n        for (var i = 0; i < objects.length; i ++){\n            var objectType = objects[i];\n            var instanceIds = Object.keys(data.entities[objectType]);\n            for (var j = 0; j < instanceIds.length; j ++){\n                var instanceId = instanceIds[j];\n                var changes = Object.keys(data.entities[objectType][instanceId]);\n                for (var k = 0; k < changes.length; k ++){\n                    var changedProp = changes[k];\n                    var changedVal = data.entities[objectType][instanceId][changedProp];\n                    if (!entities[objectType][instanceId]){\n                        entities[objectType][instanceId] = data.entities[objectType][instanceId];\n                    } else {\n                        entities[objectType][instanceId][changedProp] = changedVal;\n                    }\n                }\n            }\n        }\n        app.$set(app, 'items', data.inventory.items);\n    });\n    \n    socket.on('chatMsg', data => {\n        app.messages = app.messages.concat([data]);\n    });\n    \n    $(document)\n        .ready(function(){\n            \n            $('#viewport').on(\"click\", function(e){\n                var rect = canvas.getBoundingClientRect();\n                socket.emit('click', {\n                    x: e.clientX - rect.left - width / 2 + entities.Player[clientId].x,\n                    y: e.clientY - rect.top - height / 2 + entities.Player[clientId].y\n                });\n            });\n            \n            $('#game-cont').on('contextmenu', function(e){\n                e.preventDefault();\n            });\n            \n            $('#chat-input, .login-input')\n                .on(\"focus\", function(){\n                    textboxFocused = true;\n                })\n                .on(\"blur\", function(){\n                    textboxFocused = false;\n                });\n            \n            $('#chat-cont').on('click', function(e){\n                $('#chat-input').focus();\n            });\n            \n            $('#chat-form').on('submit', function(e){\n                var message = $('#chat-input').value();\n                if (message.charAt(0) === '/'){\n                    var inputs = message.substr(1).split(' ');\n                    if (commands[inputs[0]]){\n                        commands[inputs[0]].apply(null, inputs.slice(1));\n                    } else {\n                        socket.emit('chatMsg', message.substr(0, 140));\n                    }\n                } else {\n                    socket.emit('chatMsg', message.substr(0, 140));\n                }\n                $('#chat-input').blur();\n                $('#chat-input').value('');\n                textboxFocused = false;\n                e.preventDefault();\n            });\n            \n        })\n        .on('keydown', function(e){\n            if (!textboxFocused){\n                socket.emit('keyDown', {\n                    key: e.keyCode\n                });\n                if ([rightKey, upKey, leftKey, downKey].indexOf(e.keyCode) !== -1){\n                    e.preventDefault();\n                }\n                if (e.keyCode === 84){\n                    $('#chat-input').focus();\n                    e.preventDefault();\n                }\n                if (e.keyCode === 191){\n                    $('#chat-input').focus();\n                }\n            }\n        })\n        .on('keyup', function(e){\n            socket.emit('keyUp', {\n                key: e.keyCode\n            });\n        });\n    \n    function update(){\n        ctx.clearRect(0, 0, width, height);\n        drawMap();\n        if (entities.Player){\n            for (let id in entities.Player){\n                let player = entities.Player[id];\n                updatePosition(player);\n                let coors = getRelativeCoors([player.x, player.y]);\n                let x = coors[0];\n                let y = coors[1];\n                ctx.fillStyle = 'black';\n                ctx.fillText(player.name, x, y - 20);\n                ctx.strokeRect(x - 8, y - 8, 16, 16);\n                ctx.fillStyle = player.color;\n                ctx.fillRect(x - 8, y - 8, 16, 16);\n                //if (id === clientId){\n                    ctx.fillStyle = 'black';\n                    ctx.fillRect(x - 12, y - 16, 24, 4);\n                    ctx.fillStyle = 'red';\n                    ctx.fillRect(x - 12, y - 16, 24 * player.hp / player.maxHp, 4);\n                //}\n            }\n        }\n        if (entities.Bullet){\n            for (let id in entities.Bullet){\n                var bullet = entities.Bullet[id];\n                updatePosition(bullet);\n                let coors = getRelativeCoors([bullet.x, bullet.y]);\n                let x = coors[0];\n                let y = coors[1];\n                ctx.strokeRect(x - 8, y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(x - 8, y - 8, 16, 16);\n            }\n        }\n        if (entities.Enemy){\n            for (let id in entities.Enemy){\n                let enemy = entities.Enemy[id];\n                updatePosition(enemy);\n                let coors = getRelativeCoors([enemy.x, enemy.y]);\n                let x = coors[0];\n                let y = coors[1];\n                ctx.strokeRect(x - 8, y - 8, 16, 16);\n                ctx.fillStyle = '#922';\n                ctx.fillRect(x - 8, y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(x - 12, y - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(x - 12, y - 16, 24 * enemy.hp / enemy.maxHp, 4);\n                ctx.fillStyle = 'black';\n                ctx.fillText(enemy.name, x, y - 20);\n            }\n        }\n    }\n    \n    function drawMap(){\n        var coors = getRelativeCoors([0, 0]);\n        var left = coors[0];\n        var top = coors[1];\n        for (var x = 0; x < width; x += 480){\n            for (var y = 0; y < height; y += 480){\n                ctx.drawImage(background, left + x, top + y, 480, 480);\n            }\n        }\n    }\n    \n    function getRelativeCoors(coors){\n        return [coors[0] - entities.Player[clientId].x + width / 2, coors[1] - entities.Player[clientId].y + height / 2];\n    }\n    \n    function updatePosition(entity){\n        entity.x += entity.hspeed / 2;\n        entity.y += entity.vspeed / 2;\n    }\n    \n})(io, jQuery, Vue);\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/src/index.js"],"sourceRoot":""}