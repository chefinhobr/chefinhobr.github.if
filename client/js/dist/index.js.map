{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap 909c62e20452237cfc19","webpack:///./client/js/src/index.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","io","Vue","update","ctx","clearRect","width","height","drawMap","entities","Player","id","player","updatePosition","fillStyle","fillText","x","y","strokeRect","color","fillRect","hp","maxHp","Bullet","bullet","Enemy","enemy","drawImage","background","entity","hspeed","vspeed","rightKey","upKey","leftKey","downKey","app","el","data","messages","type","msg","items","canvas","document","getElementById","getContext","textAlign","gameCont","chatCont","chatForm","chatInput","textboxFocused","textboxes","length","onfocus","onblur","players","bullets","clientId","Image","src","commands","help","push","debug","variable","socket","emit","eval","on","console","log","setInterval","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","removed","Symbol","iterator","next","done","err","return","objects","keys","objectType","instanceIds","j","instanceId","changes","k","changedProp","changedVal","$set","inventory","concat","onkeydown","e","key","keyCode","indexOf","preventDefault","focus","onkeyup","onclick","rect","getBoundingClientRect","clientX","left","clientY","top","oncontextmenu","onsubmit","message","charAt","inputs","substr","split","apply","slice","blur"],"mappings":"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","file":"index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n(function (io, Vue) {\n    'use strict';\n\n    var width = 800;\n    var height = 600;\n\n    var rightKey = 68;\n    var upKey = 87;\n    var leftKey = 65;\n    var downKey = 83;\n\n    var app = new Vue({\n        el: '#game',\n        data: {\n            messages: [{\n                type: 'info',\n                msg: 'Welcome to the game!'\n            }],\n            items: []\n        }\n    });\n\n    var canvas = document.getElementById('viewport');\n    var ctx = canvas.getContext('2d');\n    ctx.textAlign = 'center';\n\n    var gameCont = document.getElementById('game');\n\n    var chatCont = document.getElementById('chat-cont');\n    var chatForm = document.getElementById('chat-form');\n    var chatInput = document.getElementById('chat-input');\n\n    var textboxFocused = false;\n    var textboxes = [chatInput];\n    for (var i = 0; i < textboxes.length; i++) {\n        textboxes[i].onfocus = function () {\n            textboxFocused = true;\n        };\n        textboxes[i].onblur = function () {\n            textboxFocused = false;\n        };\n    }\n\n    var entities = {\n        players: [],\n        bullets: []\n    };\n    var clientId = '';\n\n    var background = new Image();\n    background.src = '../img/grass.png';\n\n    var commands = {\n        help: function help() {\n            app.messages.push({\n                type: 'info',\n                msg: 'Commands:\\n/help - List all commands'\n            });\n        },\n        debug: function debug(variable) {\n            socket.emit('clientDebug', variable + ': ' + eval(variable));\n        }\n    };\n\n    var socket = io();\n\n    socket.on('init', function (data) {\n        entities = data.entities;\n        console.log(entities);\n        clientId = data.clientId;\n        setInterval(update, 20);\n    });\n\n    socket.on('update', function (data) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = data.removed[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var removed = _step.value;\n\n                delete entities[removed.type][removed.id];\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        var objects = Object.keys(data.entities);\n        for (var i = 0; i < objects.length; i++) {\n            var objectType = objects[i];\n            var instanceIds = Object.keys(data.entities[objectType]);\n            for (var j = 0; j < instanceIds.length; j++) {\n                var instanceId = instanceIds[j];\n                var changes = Object.keys(data.entities[objectType][instanceId]);\n                for (var k = 0; k < changes.length; k++) {\n                    var changedProp = changes[k];\n                    var changedVal = data.entities[objectType][instanceId][changedProp];\n                    if (!entities[objectType][instanceId]) {\n                        entities[objectType][instanceId] = data.entities[objectType][instanceId];\n                    } else {\n                        entities[objectType][instanceId][changedProp] = changedVal;\n                    }\n                }\n            }\n        }\n        app.$set(app, 'items', data.inventory.items);\n    });\n\n    socket.on('chatMsg', function (data) {\n        app.messages = app.messages.concat([data]);\n    });\n\n    document.onkeydown = function (e) {\n        if (!textboxFocused) {\n            socket.emit('keyDown', {\n                key: e.keyCode\n            });\n            if ([rightKey, upKey, leftKey, downKey].indexOf(e.keyCode) !== -1) {\n                e.preventDefault();\n            }\n            if (e.keyCode === 84) {\n                chatInput.focus();\n                e.preventDefault();\n            }\n            if (e.keyCode === 191) {\n                chatInput.focus();\n            }\n        }\n    };\n\n    document.onkeyup = function (e) {\n        socket.emit('keyUp', {\n            key: e.keyCode\n        });\n    };\n\n    /*document.getElementById('login-form').onsubmit = function(e){\n        socket.emit('login', {\n            username: 'porygonj',\n            password: 'abcd1234'\n        });\n        e.preventDefault();\n    };*/\n\n    canvas.onclick = function (e) {\n        var rect = canvas.getBoundingClientRect();\n        socket.emit('click', {\n            x: e.clientX - rect.left,\n            y: e.clientY - rect.top\n        });\n    };\n\n    gameCont.oncontextmenu = function (e) {\n        e.preventDefault();\n    };\n\n    chatCont.onclick = function (e) {\n        chatInput.focus();\n    };\n\n    chatForm.onsubmit = function (e) {\n        var message = chatInput.value;\n        if (message.charAt(0) === '/') {\n            var inputs = message.substr(1).split(' ');\n            if (commands[inputs[0]]) {\n                commands[inputs[0]].apply(null, inputs.slice(1));\n            } else {\n                socket.emit('chatMsg', message.substr(0, 140));\n            }\n        } else {\n            socket.emit('chatMsg', message.substr(0, 140));\n        }\n        chatInput.blur();\n        chatInput.value = '';\n        textboxFocused = false;\n        e.preventDefault();\n    };\n\n    function update() {\n        ctx.clearRect(0, 0, width, height);\n        drawMap();\n        if (entities.Player) {\n            for (var id in entities.Player) {\n                var player = entities.Player[id];\n                updatePosition(player);\n                ctx.fillStyle = 'black';\n                ctx.fillText(player.name, player.x, player.y - 20);\n                ctx.strokeRect(player.x - 8, player.y - 8, 16, 16);\n                ctx.fillStyle = player.color;\n                ctx.fillRect(player.x - 8, player.y - 8, 16, 16);\n                //if (id === clientId){\n                ctx.fillStyle = 'black';\n                ctx.fillRect(player.x - 12, player.y - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(player.x - 12, player.y - 16, 24 * player.hp / player.maxHp, 4);\n                //}\n            }\n        }\n        if (entities.Bullet) {\n            for (var _id in entities.Bullet) {\n                var bullet = entities.Bullet[_id];\n                updatePosition(bullet);\n                ctx.strokeRect(bullet.x - 8, bullet.y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(bullet.x - 8, bullet.y - 8, 16, 16);\n            }\n        }\n        if (entities.Enemy) {\n            for (var _id2 in entities.Enemy) {\n                var enemy = entities.Enemy[_id2];\n                updatePosition(enemy);\n                ctx.strokeRect(enemy.x - 8, enemy.y - 8, 16, 16);\n                ctx.fillStyle = '#922';\n                ctx.fillRect(enemy.x - 8, enemy.y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(enemy.x - 12, enemy.y - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(enemy.x - 12, enemy.y - 16, 24 * enemy.hp / enemy.maxHp, 4);\n                ctx.fillStyle = 'black';\n                ctx.fillText(enemy.name, enemy.x, enemy.y - 20);\n            }\n        }\n    }\n\n    function drawMap() {\n        for (var x = 0; x < width; x += 480) {\n            for (var y = 0; y < height; y += 480) {\n                ctx.drawImage(background, x, y, 480, 480);\n            }\n        }\n    }\n\n    function updatePosition(entity) {\n        entity.x += entity.hspeed / 2;\n        entity.y += entity.vspeed / 2;\n    }\n})(io, Vue);\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 909c62e20452237cfc19","(function(io, Vue){\n    'use strict';\n    \n    var width = 800;\n    var height = 600;\n    \n    var rightKey = 68;\n    var upKey = 87;\n    var leftKey = 65;\n    var downKey = 83;\n    \n    var app = new Vue({\n        el: '#game',\n        data: {\n            messages: [{\n                type: 'info',\n                msg: 'Welcome to the game!'\n            }],\n            items: []\n        }\n    });\n    \n    var canvas = document.getElementById('viewport');\n    var ctx = canvas.getContext('2d');\n    ctx.textAlign = 'center';\n    \n    var gameCont = document.getElementById('game');\n    \n    var chatCont = document.getElementById('chat-cont');\n    var chatForm = document.getElementById('chat-form');\n    var chatInput = document.getElementById('chat-input');\n    \n    var textboxFocused = false;\n    var textboxes = [chatInput];\n    for (var i = 0; i < textboxes.length; i ++){\n        textboxes[i].onfocus = function(){\n            textboxFocused = true;\n        };\n        textboxes[i].onblur = function(){\n            textboxFocused = false;\n        };\n    }\n    \n    var entities = {\n        players: [],\n        bullets: []\n    };\n    var clientId = '';\n    \n    var background = new Image();\n    background.src = '../img/grass.png';\n    \n    var commands = {\n        help: function(){\n            app.messages.push({\n                type: 'info',\n                msg: 'Commands:\\n/help - List all commands'\n            });\n        },\n        debug: function(variable){\n            socket.emit('clientDebug', variable + ': ' + eval(variable));\n        }\n    };\n    \n    var socket = io();\n    \n    socket.on('init', function(data){\n        entities = data.entities;\n        console.log(entities);\n        clientId = data.clientId;\n        setInterval(update, 20);\n    });\n    \n    socket.on('update', function(data){\n        for (var removed of data.removed){\n            delete entities[removed.type][removed.id];\n        }\n        var objects = Object.keys(data.entities);\n        for (var i = 0; i < objects.length; i ++){\n            var objectType = objects[i];\n            var instanceIds = Object.keys(data.entities[objectType]);\n            for (var j = 0; j < instanceIds.length; j ++){\n                var instanceId = instanceIds[j];\n                var changes = Object.keys(data.entities[objectType][instanceId]);\n                for (var k = 0; k < changes.length; k ++){\n                    var changedProp = changes[k];\n                    var changedVal = data.entities[objectType][instanceId][changedProp];\n                    if (!entities[objectType][instanceId]){\n                        entities[objectType][instanceId] = data.entities[objectType][instanceId];\n                    } else {\n                        entities[objectType][instanceId][changedProp] = changedVal;\n                    }\n                }\n            }\n        }\n        app.$set(app, 'items', data.inventory.items);\n    });\n    \n    socket.on('chatMsg', data => {\n        app.messages = app.messages.concat([data]);\n    });\n    \n    document.onkeydown = function(e){\n        if (!textboxFocused){\n            socket.emit('keyDown', {\n                key: e.keyCode\n            });\n            if ([rightKey, upKey, leftKey, downKey].indexOf(e.keyCode) !== -1){\n                e.preventDefault();\n            }\n            if (e.keyCode === 84){\n                chatInput.focus();\n                e.preventDefault();\n            }\n            if (e.keyCode === 191){\n                chatInput.focus();\n            }\n        }\n    };\n    \n    document.onkeyup = function(e){\n        socket.emit('keyUp', {\n            key: e.keyCode\n        });\n    };\n    \n    /*document.getElementById('login-form').onsubmit = function(e){\n        socket.emit('login', {\n            username: 'porygonj',\n            password: 'abcd1234'\n        });\n        e.preventDefault();\n    };*/\n    \n    canvas.onclick = function(e){\n        var rect = canvas.getBoundingClientRect();\n        socket.emit('click', {\n            x: e.clientX - rect.left,\n            y: e.clientY - rect.top\n        });\n    };\n    \n    gameCont.oncontextmenu = function(e){\n        e.preventDefault();\n    };\n    \n    chatCont.onclick = function(e){\n        chatInput.focus();\n    };\n    \n    chatForm.onsubmit = function(e){\n        var message = chatInput.value;\n        if (message.charAt(0) === '/'){\n            var inputs = message.substr(1).split(' ');\n            if (commands[inputs[0]]){\n                commands[inputs[0]].apply(null, inputs.slice(1));\n            } else {\n                socket.emit('chatMsg', message.substr(0, 140));\n            }\n        } else {\n            socket.emit('chatMsg', message.substr(0, 140));\n        }\n        chatInput.blur();\n        chatInput.value = '';\n        textboxFocused = false;\n        e.preventDefault();\n    };\n    \n    \n    function update(){\n        ctx.clearRect(0, 0, width, height);\n        drawMap();\n        if (entities.Player){\n            for (let id in entities.Player){\n                var player = entities.Player[id];\n                updatePosition(player);\n                ctx.fillStyle = 'black';\n                ctx.fillText(player.name, player.x, player.y - 20);\n                ctx.strokeRect(player.x - 8, player.y - 8, 16, 16);\n                ctx.fillStyle = player.color;\n                ctx.fillRect(player.x - 8, player.y - 8, 16, 16);\n                //if (id === clientId){\n                    ctx.fillStyle = 'black';\n                    ctx.fillRect(player.x - 12, player.y - 16, 24, 4);\n                    ctx.fillStyle = 'red';\n                    ctx.fillRect(player.x - 12, player.y - 16, 24 * player.hp / player.maxHp, 4);\n                //}\n            }\n        }\n        if (entities.Bullet){\n            for (let id in entities.Bullet){\n                var bullet = entities.Bullet[id];\n                updatePosition(bullet);\n                ctx.strokeRect(bullet.x - 8, bullet.y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(bullet.x - 8, bullet.y - 8, 16, 16);\n            }\n        }\n        if (entities.Enemy){\n            for (let id in entities.Enemy){\n                var enemy = entities.Enemy[id];\n                updatePosition(enemy);\n                ctx.strokeRect(enemy.x - 8, enemy.y - 8, 16, 16);\n                ctx.fillStyle = '#922';\n                ctx.fillRect(enemy.x - 8, enemy.y - 8, 16, 16);\n                ctx.fillStyle = 'black';\n                ctx.fillRect(enemy.x - 12, enemy.y - 16, 24, 4);\n                ctx.fillStyle = 'red';\n                ctx.fillRect(enemy.x - 12, enemy.y - 16, 24 * enemy.hp / enemy.maxHp, 4);\n                ctx.fillStyle = 'black';\n                ctx.fillText(enemy.name, enemy.x, enemy.y - 20);\n            }\n        }\n    }\n    \n    function drawMap(){\n        for (var x = 0; x < width; x += 480){\n            for (var y = 0; y < height; y += 480){\n                ctx.drawImage(background, x, y, 480, 480);\n            }\n        }\n    }\n    \n    function updatePosition(entity){\n        entity.x += entity.hspeed / 2;\n        entity.y += entity.vspeed / 2;\n    }\n    \n})(io, Vue);\n\n\n\n// WEBPACK FOOTER //\n// ./client/js/src/index.js"],"sourceRoot":""}