!function(t){function e(i){if(n[i])return n[i].exports;var c=n[i]={i:i,l:!1,exports:{}};return t[i].call(c.exports,c,c.exports,e),c.l=!0,c.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(module,exports,__webpack_require__){"use strict";!function(io,Vue){function update(){if(ctx.clearRect(0,0,width,height),drawMap(),entities.Player)for(var t in entities.Player){var e=entities.Player[t];updatePosition(e),ctx.fillStyle="black",ctx.fillText(e.name,e.x,e.y-20),ctx.strokeRect(e.x-8,e.y-8,16,16),ctx.fillStyle=e.color,ctx.fillRect(e.x-8,e.y-8,16,16),ctx.fillStyle="black",ctx.fillRect(e.x-12,e.y-16,24,4),ctx.fillStyle="red",ctx.fillRect(e.x-12,e.y-16,24*e.hp/e.maxHp,4)}if(entities.Bullet)for(var n in entities.Bullet){var i=entities.Bullet[n];updatePosition(i),ctx.strokeRect(i.x-8,i.y-8,16,16),ctx.fillStyle="black",ctx.fillRect(i.x-8,i.y-8,16,16)}if(entities.Enemy)for(var c in entities.Enemy){var o=entities.Enemy[c];o&&(updatePosition(o),ctx.strokeRect(o.x-8,o.y-8,16,16),ctx.fillStyle="#922",ctx.fillRect(o.x-8,o.y-8,16,16),ctx.fillStyle="black",ctx.fillRect(o.x-12,o.y-16,24,4),ctx.fillStyle="red",ctx.fillRect(o.x-12,o.y-16,24*o.hp/o.maxHp,4),ctx.fillStyle="black",ctx.fillText(o.name,o.x,o.y-20))}}function drawMap(){for(var t=0;t<width;t+=480)for(var e=0;e<height;e+=480)ctx.drawImage(background,t,e,480,480)}function updatePosition(t){t.x+=t.hspeed/2,t.y+=t.vspeed/2}var width=800,height=600,rightKey=68,upKey=87,leftKey=65,downKey=83,app=new Vue({el:"#chat-cont",data:{messages:[{type:"info",msg:"Welcome to the game!"}]}}),canvas=document.getElementById("viewport"),ctx=canvas.getContext("2d");ctx.textAlign="center";for(var gameCont=document.getElementById("game"),chatCont=document.getElementById("chat-cont"),chatForm=document.getElementById("chat-form"),chatInput=document.getElementById("chat-input"),textboxFocused=!1,textboxes=[chatInput],i=0;i<textboxes.length;i++)textboxes[i].onfocus=function(){textboxFocused=!0},textboxes[i].onblur=function(){textboxFocused=!1};var entities={players:[],bullets:[]},clientId="",background=new Image;background.src="../img/grass.png";var commands={help:function(){app.messages.push({type:"info",msg:"Commands:\n/help - List all commands"})},debug:function debug(variable){socket.emit("clientDebug",variable+": "+eval(variable))}},socket=io();socket.on("init",function(t){entities=t.entities,console.log(entities),clientId=t.clientId,setInterval(update,20)}),socket.on("update",function(t){var e=!0,n=!1,i=void 0;try{for(var c,o=t.removed[Symbol.iterator]();!(e=(c=o.next()).done);e=!0){var a=c.value;delete entities[a.type][a.id]}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}for(var l=Object.keys(t.entities),r=0;r<l.length;r++)for(var s=l[r],u=Object.keys(t.entities[s]),f=0;f<u.length;f++)for(var x=u[f],d=Object.keys(t.entities[s][x]),y=0;y<d.length;y++){var p=d[y],m=t.entities[s][x][p];entities[s][x]?entities[s][x][p]=m:entities[s][x]=t.entities[s][x]}}),socket.on("chatMsg",function(t){app.messages=app.messages.concat([t])}),document.onkeydown=function(t){textboxFocused||(socket.emit("keyDown",{key:t.keyCode}),-1!==[68,87,65,83].indexOf(t.keyCode)&&t.preventDefault(),84===t.keyCode&&(chatInput.focus(),t.preventDefault()),191===t.keyCode&&chatInput.focus())},document.onkeyup=function(t){socket.emit("keyUp",{key:t.keyCode})},canvas.onclick=function(t){var e=canvas.getBoundingClientRect();socket.emit("click",{x:t.clientX-e.left,y:t.clientY-e.top})},gameCont.oncontextmenu=function(t){t.preventDefault()},chatCont.onclick=function(t){chatInput.focus()},chatForm.onsubmit=function(t){var e=chatInput.value;if("/"===e.charAt(0)){var n=e.substr(1).split(" ");commands[n[0]]?commands[n[0]].apply(null,n.slice(1)):socket.emit("chatMsg",e.substr(0,140))}else socket.emit("chatMsg",e.substr(0,140));chatInput.blur(),chatInput.value="",textboxFocused=!1,t.preventDefault()}}(io,Vue)}]);
//# sourceMappingURL=index.js.map